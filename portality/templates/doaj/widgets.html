{% extends "base.html" %}

{% block content %}

<h2>DOAJ widgets</h2>
<br>
<div style="padding: 4px">
<h3>Simple search widget</h3>
Just copy and paste this on the page on which you want the widget to displayed.

{% if env=="dev" %}
<pre>
&lt;script src="http://localhost:5004/static/widget/simple_search_dev.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;div id="doaj-simple-search-widget"&gt;&lt;/div&gt;
</pre>

Example:
<script src="http://localhost:5004/static/widget/simple_search_dev.js" type="text/javascript"></script>
<div id="doaj-simple-search-widget"></div>

{% elif env=="test" %}
<pre>
&lt;script src="https://testdoaj.cottagelabs.com/static/widget/simple_search_test.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;div id="doaj-simple-search-widget"&gt;&lt;/div&gt;
</pre>

Example:
<script src="https://testdoaj.cottagelabs.com/static/widget/simple_search_test.js" type="text/javascript"></script>
<div id="doaj-simple-search-widget"></div>

{% elif env=="staging" %}
<pre>
&lt;script src="https://stagingdoaj.cottagelabs.com/static/widget/simple_search_staging.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;div id="doaj-simple-search-widget"&gt;&lt;/div&gt;
</pre>

Example:
<script src="https://stagingdoaj.cottagelabs.com/static/widget/simple_search_staging.js" type="text/javascript"></script>
<div id="doaj-simple-search-widget"></div>


{% elif env=="production" %}
<pre>
&lt;script src="https://doaj.org/static/widget/simple_search.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;div id="doaj-simple-search-widget"&gt;&lt;/div&gt;
</pre>

Example:
<script src="https://doaj.org/static/widget/simple_search.js" type="text/javascript"></script>
<div id="doaj-simple-search-widget"></div>
{% endif %}

</div>
<br>
<div style="padding: 4px">

<h3>Fixed query widget</h3>
<p>This renders a set of results from the DOAJ based on a query fixed in JavaScript.</p>

<p>Copy and paste the following code on the page where you want the widget to displayed. The parameter QUERY_OPTIONS takes a subset of
fields to define which results to retrieve. The example below example displays the journals containing the word 'medicine' in the title, in
alphabetical order. Configuration via these QUERY_OPTIONS provides a simplified way to display results by keyword.</p>

<p><b>For more control over which results to display, we recommend configuring your query via the <a href="{{ url_for('doaj.search')}}">Search page</a></b> -
simply use the controls to find the results you want to show then click the 'share' button, choose 'embed this search', and copy the output provided to include on your page.</p>

<pre>
&lt;script type="text/javascript"&gt;
var QUERY_OPTIONS = {
    query_string : 'medicine',                   // The plain-text query string
    search_field: 'bibjson.title',               // The field we are querying
    sort_field: 'index.unpunctitle.exact',       // Field to order results by
    sort_direction:  'asc',                      // Direction of sort "asc" | "desc"
    search_operator : 'AND',                     // Which sort operator to use "AND" | "OR"
    search_type: 'journal',                      // Which type to search upon (omit for both) "article" | "journal"
    page_size : 5,                               // How many results to show per widget page
    page_from : 0                                // Which result to start from
    }
&lt;/script&gt;
&lt;script src="{{ config.get('BASE_URL') }}/static/widget/fixed_query.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;div id="doaj-fixed-query-widget"&gt;&lt;/div&gt;
</pre>

Example:
<script type="text/javascript">
var QUERY_OPTIONS = {
    query_string : 'medicine',                     // The plain-text query string
    search_field: 'bibjson.title',                 // The field we are querying
    sort_field: 'index.unpunctitle.exact',         // Field to order results by
    sort_direction:  'asc',                        // Direction of sort "asc" | "desc"
    search_operator : 'AND',                       // Which sort operator to use "AND" | "OR"
    search_type: 'journal',                        // Which type to search upon (omit for both) "article" | "journal"
    page_size : 5,                                 // How many results to show per widget page
    page_from : 0                                  // Which result to initially start from
    }
</script>
<script src="/static/widget/fixed_query.js" type="text/javascript"></script>
<div id="doaj-fixed-query-widget"></div>
</div>
{% endblock %}
